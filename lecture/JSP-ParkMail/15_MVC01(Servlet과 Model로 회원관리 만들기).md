# 15_MVC01(Servlet과 Model로 회원관리 만들기)

MVC 패턴의 발전 과정에 따라서 단계별로 학습을 진행합니다. 시작은 Servlet과 Model을 기반으로 구한 후에 두 번째로 JSP와 Model 기반으로 구현합니다. 마지막으로 Servlet과 JSP, 즉 Controller와 View를 합쳐서 MVC 구조 형태로 구현하겠습니다. 시작하기 전, MVC 모델에 대해 학습합니다.

### 비즈니스 로직

비즈니스 로직은 어떤 애플리케이션 또는 시스템이 특정 비즈니스 목표를 달성하기 위해 수행하는 데이터 처리, 규칙 및 프로세스를 나타냅니다. 이것은 일반적으로 데이터를 다루고 가공하는 작업, 데이터의 유효성 검사, 업무 프로세스의 정의, 의사 결정 로직, 규칙 및 조건, 데이터베이스 업데이트, 사용자 인터페이스 제어 및 다른 핵심 비즈니스 기능을 포함합니다.

비즈니스 로직은 특정 비즈니스 도메인 또는 업무 영역에 특화된 규칙과 프로세스를 나타내며, 이러한 로직은 특정 비즈니스 목표를 달성하기 위해 애플리케이션에서 실행됩니다.

예를 들어, 은행 애플리케이션의 비즈니스 로직은 다음과 같은 작업을 수행할 수 있습니다:

- 계좌 생성, 업데이트 및 삭제
- 거래 기록 작성 및 업데이트
- 잔액 계산
- 대출 승인 및 이자 계산
- 고객 인증 및 보안 검사
- 계정 활동의 모니터링 및 로깅

비즈니스 로직은 애플리케이션의 핵심 부분이며, 비즈니스 요구 사항에 따라 정의됩니다. 이것은 주로 프로그래밍 언어로 구현되며, 모델 계층에서 구현될 수 있으며, MVC 패턴에서 모델은 주로 비즈니스 로직을 캡슐화하고 처리합니다.

비즈니스 로직은 특정 비즈니스 과제를 해결하는 방법을 정의하고, 데이터 처리 및 의사 결정 과정을 조직화하는 데 도움을 줍니다. 비즈니스 로직은 다양한 업종 및 응용프로그램에 대한 특정 요구 사항에 따라 다양한 형태로 나타날 수 있습니다.

## MVC 패턴 기준

1. **모델(Model)**:
   - 모델은 데이터와 비즈니스 로직을 포함합니다.
   - 데이터의 상태를 저장하고 관리합니다.
   - 데이터 변경과 관련된 로직을 처리합니다.
   - 모델은 독립적으로 데이터를 관리하며 뷰나 컨트롤러와 직접 상호작용하지 않습니다.
2. **뷰(View)**:
   - 뷰는 사용자 인터페이스(UI)를 나타냅니다.
   - 모델의 데이터를 시각적으로 표현하고 사용자에게 표시합니다.
   - 사용자 입력을 받아 모델로 전달하는 역할을 합니다.
   - 여러 개의 뷰가 하나의 모델을 공유할 수 있습니다.
3. **컨트롤러(Controller)**:
   - 컨트롤러는 사용자 입력을 처리하고 모델 및 뷰 사이의 상호작용을 조정합니다.
   - 사용자의 동작을 해석하고 모델을 업데이트하거나 뷰를 업데이트하는 역할을 합니다.
   - 여러 컨트롤러가 여러 뷰 및 모델과 상호작용할 수 있습니다.



## 자바 기반 MVC 패턴 기준

1. **모델 (Model)**:

   - 모델은 데이터 및 비즈니스 로직을 포함합니다.
   - 데이터는 데이터베이스, 파일 시스템, 외부 API 또는 기타 데이터 소스와 관련된 것이며, 일반적으로 Java 클래스로 표현됩니다.
   - Java 클래스는 데이터 객체 또는 엔터티 클래스로 정의됩니다.
   - 데이터베이스와 관련된 클래스는 데이터베이스 연결, 쿼리 실행 및 데이터 조작을 처리합니다.
   - 비즈니스 로직은 모델 내에서 정의되고 구현됩니다. 이 비즈니스 로직은 데이터를 처리하고 업무 규칙을 적용하여 필요한 작업을 수행합니다.
   - 모델은 비즈니스 데이터를 나타내고 데이터를 읽고 쓰는 데 사용됩니다.

   예를 들어, 데이터베이스 연결 및 모델 클래스를 포함한 데이터 관련 Java 파일은 프로젝트의 `src` 폴더 또는 `src/main/java` 폴더에 저장할 수 있습니다.

   

2. **뷰 (View)**:

   - 뷰는 사용자 인터페이스와 관련된 부분을 나타냅니다.
   - HTML, JSP(JavaServer Pages), 또는 템플릿 엔진을 사용하여 웹 페이지를 생성하고 표시하는 데 사용됩니다.
   - 뷰 파일은 주로 웹 애플리케이션의 `WebContent` 또는 `webapp` 디렉토리에 저장됩니다.
   - 비즈니스 로직을 직접 처리하지 않고 모델로부터 데이터를 가져와 사용자에게 표시합니다.
   - 뷰는 사용자가 상호 작용할 수 있는 UI 요소를 제공하고 사용자 입력을 컨트롤러로 전달합니다.

   예를 들어, JSP 파일은 `WebContent` 폴더 내의 하위 디렉토리에 저장됩니다.

   

3. **컨트롤러 (Controller)**:

   - 컨트롤러는 사용자 입력을 처리하고 모델과 뷰를 연결하는 역할을 합니다.
   - Java 서블릿(Servlet)을 사용하여 컨트롤러 로직을 작성할 수 있습니다.
   - Java 서블릿 클래스는 웹 애플리케이션의 `src` 폴더 또는 `src/main/java` 폴더에 저장됩니다.
   - 사용자 입력을 받고 해당 입력을 모델에 전달하여 비즈니스 로직을 호출합니다.
   - 비즈니스 로직의 실행 결과를 뷰로 보내어 사용자에게 표시합니다.

   예를 들어, Java 서블릿 파일은 `src` 폴더 내의 패키지에 저장됩니다.
   
   

일반적으로 Java 웹 애플리케이션에서는 모델, 뷰 및 컨트롤러를 각각 다른 디렉토리에 구성하여 개발합니다. 이러한 구조는 코드를 모듈화하고 유지 관리하기 쉽게 만들어줍니다. 애플리케이션의 구체적인 구조는 사용하는 프레임워크 및 개발환경에 따라 다를 수 있으므로 프로젝트 설정과 관례에 따라 디렉토리를 조직하는 것이 중요합니다.

따라서 비즈니스 로직은 주로 모델 내에 구현되며, 컨트롤러를 통해 호출되어 모델의 데이터를 처리하고 관리합니다. 이것은 MVC 패턴의 주요 목표 중 하나로 비즈니스 로직을 모델로 캡슐화하여 코드를 모듈화하고 유지 보수하기 쉽게 만듭니다.

### VO(Value Object)

VO(값 객체, Value Object)는 Java 기반 웹 애플리케이션에서 MVC (Model-View-Controller) 패턴을 구현할 때 사용되는 데이터 구조입니다. VO는 주로 모델(Model) 계층에서 사용되며 데이터의 전달 및 관리에 중점을 둡니다.

VO의 주요 특징과 역할은 다음과 같습니다:

1. **데이터 저장 및 전달**: VO는 데이터를 저장하고 관리하는 데 사용됩니다. 이 데이터는 일반적으로 데이터베이스에서 가져온 데이터나 사용자 입력 데이터 등 다양한 형태일 수 있습니다.
2. **불변성 (Immutability)**: VO는 일반적으로 불변 객체로 설계됩니다. 즉, 한 번 생성된 후에는 내부 상태가 변경되지 않습니다. 이것은 데이터의 일관성과 안정성을 유지하는 데 도움을 줍니다.
3. **객체로 데이터 그룹화**: VO는 관련 데이터를 하나의 객체로 그룹화하여 표현합니다. 이는 관련 데이터를 쉽게 전달하고 유지 관리하는 데 도움을 줍니다.
4. **비즈니스 로직을 포함하지 않음**: VO는 주로 데이터의 구조를 정의하고 값을 저장하며 비즈니스 로직을 포함하지 않습니다. 비즈니스 로직은 일반적으로 모델(Model) 계층의 다른 클래스에서 처리됩니다.

예를 들어, 은행 웹 애플리케이션에서 사용하는 VO 객체는 고객의 계좌 정보를 저장하고 다루는 데 사용될 수 있습니다. 이 VO 객체는 고객의 이름, 계좌 번호, 잔액 및 거래 내역과 같은 정보를 저장하는 데 사용될 것이며, 해당 데이터를 모델 계층에서 관리합니다.

일반적으로 VO 클래스는 Java Bean 규칙을 따르며, 인스턴스 변수를 private로 선언하고 getter 및 setter 메서드를 제공하여 데이터에 접근할 수 있도록 합니다. 이러한 VO 클래스를 사용하면 데이터를 캡슐화하고 모델 계층과 뷰 계층 간에 데이터를 전달하는 데 도움이 됩니다.



### DAO (Data Access Object)
DAO (Data Access Object)는 데이터베이스와 상호 작용하는 데 사용되는 패턴 또는 객체입니다. DAO 패턴은 데이터베이스 관련 작업을 모델(Model) 계층과 분리하여 데이터베이스 액세스를 추상화하고 모델 코드와 데이터베이스 코드를 분리함으로써 코드의 유지 보수와 확장성을 개선합니다.

다음은 DAO 패턴의 주요 특징과 사용 방법에 대한 설명입니다:

1. **데이터베이스 액세스 추상화**: DAO는 데이터베이스 액세스를 추상화하고 데이터베이스와의 통신을 처리합니다. 모델(Model) 계층은 DAO를 사용하여 데이터를 읽고 쓰며, 데이터베이스의 세부 사항을 알 필요가 없습니다.
2. **CRUD 작업**: DAO는 주로 CRUD(Create, Read, Update, Delete) 작업을 처리합니다. 이것은 데이터베이스 레코드의 생성, 읽기, 업데이트 및 삭제와 관련된 작업을 나타냅니다.
3. **모델과 데이터베이스 간 분리**: DAO 패턴을 사용하면 모델과 데이터베이스 간의 결합도를 낮추고 모델 코드를 더 독립적으로 만들 수 있습니다. 데이터베이스가 변경되더라도 모델 계층의 코드를 변경하지 않고 DAO 코드만 업데이트하면 됩니다.
4. **재사용성**: DAO 코드는 다른 모델에서도 재사용할 수 있으며, 동일한 데이터베이스 테이블을 사용하는 여러 모델에서 동일한 DAO 클래스를 공유할 수 있습니다.

DAO 클래스는 일반적으로 다음과 같은 메서드를 포함합니다:

- 데이터베이스 연결 관리 (예: 연결 열기 및 닫기).
- 데이터베이스 레코드의 CRUD 작업 (데이터 읽기, 생성, 업데이트, 삭제).
- 데이터베이스 트랜잭션 관리 (데이터베이스 트랜잭션 시작, 커밋, 롤백).
- 데이터베이스 쿼리 수행.

DAO 클래스는 일반적으로 데이터베이스와 통신하는 JDBC(Java Database Connectivity) 또는 ORM(Object-Relational Mapping) 프레임워크와 함께 사용됩니다. 이 클래스는 데이터베이스와의 통신을 캡슐화하고 모델 계층이 데이터베이스 상세 사항을 알 필요가 없도록 합니다.

일반적으로 DAO 클래스는 모델 계층의 패키지 내에 저장됩니다. 이렇게 하면 관련된 비즈니스 로직과 데이터 액세스 코드를 모델 계층에서 논리적으로 그룹화하고 유지 관리하기 쉽게 만들 수 있습니다.



### 은행으로 예를 들어 VO, DAO 이해하기 

**Value Object (VO)**:

Value Object (VO)는 데이터 구조를 나타내는 객체입니다. VO는 데이터베이스 테이블 레코드나 다른 데이터 요소와 관련된 데이터를 저장하고 캡슐화합니다. 이 데이터는 읽기 전용이며 일반적으로 변경되지 않는 데이터를 나타내는 데 사용됩니다. VO는 데이터 구조를 정의하고 그 데이터에 접근할 수 있는 메서드를 제공합니다.

예를 들어, 은행 응용 프로그램에서 다음과 같은 VO 클래스를 사용할 수 있습니다:

- **CustomerVO**: 고객 정보를 저장하는 VO 클래스로, 고객의 이름, 주소, 전화번호, 이메일 주소와 같은 정보를 포함합니다.
- **AccountVO**: 계좌 정보를 저장하는 VO 클래스로, 계좌 번호, 잔액, 계좌 유형과 같은 정보를 포함합니다.
- **TransactionVO**: 거래 정보를 저장하는 VO 클래스로, 거래 ID, 거래 유형, 금액, 날짜 및 시간과 같은 정보를 포함합니다.

VO 클래스는 다음 특징을 가집니다:

1. **불변성**: VO는 데이터를 읽기 전용으로 처리하며, 데이터가 한 번 설정되면 변경되지 않습니다. 이것은 데이터의 무결성과 안정성을 보장합니다.
2. **인스턴스 변수**: VO 클래스에는 데이터를 저장할 인스턴스 변수가 포함되며, 이 변수들은 주로 private으로 선언됩니다.
3. **게터(Getter) 및 세터(Setter) 메서드**: VO 클래스는 데이터에 접근할 수 있는 게터 메서드를 제공합니다. 게터 메서드를 통해 데이터를 읽을 수 있으며, 세터 메서드를 통해 데이터를 설정할 수 있습니다. **세터 메서드는 불변성을 유지하기 위해 주로 제공되지 않습니다.**

**DAO (Data Access Object)**:

Data Access Object (DAO)는 데이터베이스와의 상호 작용을 추상화하고 관리하는 객체입니다. DAO는 모델 계층에서 데이터베이스와 데이터 교환을 담당하며 데이터베이스와의 통신을 캡슐화합니다.

예를 들어, 은행 응용 프로그램에서 DAO 클래스는 다음과 같은 작업을 수행할 수 있습니다:

- 데이터베이스 연결을 열고 닫는 작업을 처리합니다.
- 데이터베이스 쿼리를 작성하고 실행하여 데이터를 읽어오거나 업데이트합니다.
- 트랜잭션 관리를 수행합니다.

DAO 클래스는 VO 클래스와 함께 사용되어 데이터베이스에서 검색된 데이터를 VO 객체로 변환하거나 VO 객체를 데이터베이스에 저장할 수 있습니다. 이를 통해 데이터베이스와 모델 간의 데이터 교환을 관리하고 데이터베이스 세부 사항을 모델 계층으로부터 분리할 수 있습니다.

즉, VO 클래스는 데이터를 표현하고 캡슐화하며, DAO 클래스는 데이터베이스와의 통신 및 데이터 액세스를 관리하는 역할을 합니다. 이 두 가지 요소는 모델 계층 내에서 데이터를 처리하고 관리하는 데 사용됩니다.



### 최종 정리

**은행 응용 프로그램 및 MVC (Model-View-Controller) 패턴**:

1. **모델 (Model)**:
   - 모델은 은행 응용 프로그램의 핵심 부분으로, 고객, 계좌, 거래와 같은 은행과 관련된 데이터와 비즈니스 로직을 포함합니다.
   - 예를 들어, 고객 정보, 계좌 정보, 거래 내역을 저장하고 이러한 데이터를 관리하는 비즈니스 로직은 모델에 속합니다.
   - 모델은 데이터의 상태를 관리하고 데이터의 변경 사항을 추적합니다. 모델의 목적은 데이터를 처리하고 비즈니스 규칙을 적용하는 것입니다.
2. **뷰 (View)**:
   - 뷰는 사용자 인터페이스(UI)를 나타내며, 사용자에게 데이터를 시각적으로 표시하는 역할을 합니다.
   - 예를 들어, 웹 은행 애플리케이션에서는 웹 페이지가 뷰 역할을 하며, 고객의 계좌 잔액을 표시하거나 거래 내역을 시각화합니다.
   - 뷰는 사용자 입력을 받아 컨트롤러로 전달하고, 모델로부터 데이터를 가져와 사용자에게 표시합니다.
3. **컨트롤러 (Controller)**:
   - 컨트롤러는 사용자 입력을 처리하고 모델, 뷰, VO (Value Object) 및 DAO (Data Access Object) 사이의 중개자 역할을 합니다.
   - 사용자가 계좌 잔액 조회를 요청하면 컨트롤러가 이를 감지하고 이 요청을 처리하기 위해 모델에게 지시합니다.
   - 모델은 VO를 사용하여 데이터를 관리하며, VO는 데이터를 캡슐화하고 모델과 컨트롤러 사이에서 데이터를 전달하는 역할을 합니다.
   - DAO는 데이터베이스와의 상호 작용을 처리하고 데이터를 모델로 가져오거나 모델에서 데이터베이스로 저장하는 데 사용됩니다.

이런 방식으로 MVC 패턴은 각 구성 요소를 분리하여 애플리케이션을 구조화하고 관리합니다. 모델은 데이터와 비즈니스 로직을 처리하고 데이터를 관리하며, VO와 DAO는 데이터의 캡슐화와 데이터베이스와의 상호 작용을 담당합니다. 뷰는 데이터의 시각적 표현을 담당하고 사용자와 상호 작용합니다. 컨트롤러는 사용자 입력을 처리하고 모델, 뷰, VO, DAO 사이의 상호 작용을 조정하여 애플리케이션 동작을 조정합니다.

VO와 DAO는 데이터의 캡슐화와 데이터베이스 상호 작용을 추상화하는 데 중요한 역할을 합니다.



MVC 패턴에 대한 시각적인 이해를 돕기 위해 아래에 간단한 설명을 포함한 텍스트 아트로 제작한 도식을 제공합니다.

```ABAP
+-----------------------------------+
|             사용자               |
|             입력                |
+-----------------|-----------------+
                 |
                 v

      +----------|----------+
      |   컨트롤러(Controller)  |
      |-----------------------|
      |                       |
      |   +-----|-----+   |
      |   |    모델(Model)   |
      |   |-----------------|
      |   |                  |
      |   |   +-----|-----+ |
      |   |   |   VO   |   |
      |   |   +-----|-----+ |
      |   |   |   DAO  |   |
      |   |   +-----------+ |
      |   |                  |
      |-----------------------|
      |                       |
      |   +-----|-----+   |
      |   |   뷰(View)    |
      |   |-----------------|
      |   |                  |
      |   |   화면, 그래픽   |
      |   |   인터페이스    |
      |   +-----------|-----+
      |                       |
+-------------------|-----------------+
|          사용자에게 표시          |
|          데이터 출력           |
+-----------------------------------+
```

이 도식은 사용자 입력이 컨트롤러로 전달되고, 컨트롤러가 모델과 뷰를 연결하여 데이터를 처리하고 사용자에게 표시하는 방식을 보여줍니다. 모델은 데이터와 비즈니스 로직을 관리하고, VO와 DAO는 데이터의 캡슐화와 데이터베이스 상호 작용을 담당합니다.

- **컨트롤러 (Controller)**: 컨트롤러는 사용자 입력을 처리하고 모델과 뷰 사이의 중개자 역할을 수행합니다. 사용자 입력이 들어오면 컨트롤러가 이를 감지하고, 이에 따라 모델과 뷰를 연결하고 상호 작용을 조정합니다.
  - 컨트롤러는 사용자 입력을 모델에 전달하여 필요한 데이터를 가져오고 비즈니스 로직을 실행합니다.
  - 컨트롤러는 모델로부터 받은 데이터를 뷰로 전달하여 사용자에게 표시합니다.

이렇게 컨트롤러는 모델과 뷰를 통합하여 사용자와 상호 작용하고 응용 프로그램의 동작을 제어합니다. 이 중요한 역할 때문에 컨트롤러에는 모델과 뷰가 포함되어 있다고 볼 수 있습니다.