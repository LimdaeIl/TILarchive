# 섹션0. JPA 소개

### 목표 : 객체와 테이블 설계 매핑 

- 객체와 테이블을 제대로 설계하고 매핑하는 방법
- 기본 키와 외래 키 매핑
- 1:N, N:1, 1:1, N:M 매핑
- 실무 노하우 + 성능 고려
- JPA 내부 동작 방식 이해하기
- JPA가 언제, 어떤 SQL을 만들어 실행하는지 이해

JPA를 배우기 앞서 어떤 문제점이 있었고 어떤게, 어떻게 개선되었는지 확인합니다.



<br />



### 패러다임의 불일치

JPA는 객체 지향 프로그래밍 언어인 자바와 관계형 데이터베이스 사이에서 발생하는 패러다임의 불일치를 극복하기 위한 기술로 사용됩니다. 이러한 불일치는 다음과 같은 주요 차이점으로 나타납니다:

1. **데이터 모델의 차이**

   - 객체 지향 언어: **클래스**와 **객체**를 사용하여 데이터 모델을 정의

   - 관계형 데이터베이스:  **테이블**, **열**, **행**으로 데이터를 저장

     이러한 모델 간의 차이로 인해 데이터를 변환하고 매핑해야 합니다.

2. **상속 및 다형성**

   - 객체 지향 언어: **상속** 및 **다형성**과 같은 개념을 지원
   - 관계형 데이터베이스: 이러한 개념을 직접 지원하지 않음

3. **식별자 관리**

   - 관계형 데이터베이스: **고유한 키(primary key)를 사용하여 레코드를 식별**
   - 객체 지향 언어: **레퍼런스를 사용하여 객체를 식별**

JPA는 이러한 불일치를 극복하기 위해 객체와 관계형 데이터베이스 간의 매핑을 지원합니다. JPA를 사용하면 개발자는 객체 지향 모델을 사용하여 데이터베이스와 상호 작용할 수 있습니다. JPA는 객체와 데이터베이스 간의 매핑을 처리하고 객체 지향 프로그래밍 언어의 특징을 유지하면서 데이터베이스 조작을 간단하게 만듭니다.

이를 통해 개발자는 객체를 통해 데이터를 조작할 수 있으며, JPA는 이를 내부적으로 관계형 데이터베이스와 일치시키는 작업을 수행합니다. 따라서 JPA는 객체와 관계형 데이터베이스 간의 패러다임 불일치를 극복하는데 도움을 줍니다.

 

### ORM(Object-Relational Mapping)

ORM은 "Object-Relational Mapping"의 약어로, **객체와 관계형 데이터베이스 간의 데이터 변환과 상호 작용을 단순화하는 프로그래밍 기술 또는 패턴**을 가리킵니다. ORM은 객체 지향 프로그래밍 언어와 관계형 데이터베이스 간의 패러다임 불일치를 해결하기 위해 개발되었습니다.

주요 요소와 개념:

1. **객체 지향 모델**
   - 객체 지향 프로그래밍 언어(예: Java, C#, Python)에서는 데이터와 데이터 처리 로직을 클래스와 객체로 표현
   - 객체는 상속, 다형성, 캡슐화와 같은 객체 지향 개념을 활용하여 모델링
2. **관계형 데이터베이스 모델**
   - 관계형 데이터베이스는 테이블, 열, 행으로 데이터를 저장
   - SQL(Structured Query Language)을 사용하여 데이터를 검색, 삽입, 갱신, 삭제
   - 데이터는 정형화된 스키마를 따르며 관계형 데이터베이스 관리 시스템(RDBMS)을 사용하여 관리

ORM의 주요 목표는 이러한 **두 모델 간의 불일치를 해소하고 다음을 달성하는 것**입니다:

1. **객체와 데이터베이스 간의 매핑**
   - 객체를 데이터베이스 테이블로 매핑하고, 객체의 속성을 데이터베이스 열에 매핑

2. **CRUD 연산의 추상화**
   - 객체를 통해 데이터를 삽입, 검색, 갱신, 삭제(CRUD)할 수 있도록 추상화된 인터페이스를 제공

3. **객체 지향 쿼리 언어**
   - 객체 지향 언어를 사용하여 데이터베이스에서 쿼리를 작성할 수 있도록 지원
   - 예를 들어, JPQL(Java Persistence Query Language)는 JPA의 일부로 객체를 대상으로 하는 쿼리 언어

4. **지연 로딩 및 성능 최적화**
   - ORM은 객체 그래프를 관리하고 필요에 따라 데이터를 지연 로딩하여 성능을 최적화

ORM 프레임워크의 예시로는 Hibernate, Java Persistence API (JPA), Entity Framework (.NET), Django ORM (Python), SQLAlchemy (Python) 등이 있습니다. 이러한 프레임워크를 사용하면 개발자는 데이터베이스와의 상호 작용을 단순화하고 객체 지향 프로그래밍 모델을 유지하면서 데이터를 다룰 수 있습니다.

 

### JPA를 왜 사용해야 하는걸까?

JPA(Java Persistence API)를 사용해야 하는 이유는 여러 가지가 있습니다. 다음은 JPA를 사용하는 장점과 이유에 대한 몇 가지 주요 내용입니다:

1. **객체-관계 매핑의 편리함**
   - JPA는 객체와 관계형 데이터베이스 간의 매핑을 단순화
   - 이는 객체 지향 언어인 Java와 관계형 데이터베이스 간의 패러다임 불일치를 해결하는 데 도움
   - 개발자는 객체를 사용하여 데이터를 다룰 수 있으며, JPA가 객체와 데이터베이스 간의 변환 작업을 처리
2. **생산성 향상**
   - JPA를 사용하면 SQL을 직접 작성할 필요가 없음
   - JPQL(Java Persistence Query Language) 또는 Criteria API와 같은 풍부한 쿼리 언어를 통해 데이터를 검색하고 조작이 가능
   - 개발 생산성을 향상시키고 코드의 가독성을 높이는데 기여
3. **표준화된 접근 방식**
   - JPA는 Java EE 스펙의 일부로서 표준화되어 있어 다양한 자바 기반 애플리케이션에서 사용
   - 애플리케이션을 특정 데이터베이스 제품에 종속하지 않도록 해주며, 데이터베이스 변경 시 코드 수정을 최소화
4. **객체 지향적 프로그래밍**
   - JPA는 객체 지향 프로그래밍을 지원
   - 데이터베이스의 테이블과 열을 객체와 속성에 매핑함으로써 객체 지향 모델을 사용하여 데이터를 핸들링
5. **지연 로딩 및 성능 최적화**
   - JPA는 지연 로딩을 통해 연관된 객체를 필요할 때 로드하므로 성능을 최적화
   - 또한 캐싱 및 성능 튜닝 기능을 지원
6. **트랜잭션 관리**
   - JPA는 데이터베이스 트랜잭션을 관리하는 기능을 제공하므로 데이터 일관성을 유지가 가능
7. **보안**
   - JPA는 SQL 주입 공격을 방지하는 데 도움을 주며, 엔터티와 역할 기반 보안 모델을 사용이 가능
8. **풍부한 에코시스템**
   - JPA를 지원하는 다양한 프레임워크와 도구가 존재
   - 에코시스템을 활용하여 개발을 단순화하고 품질을 향상이 가능

종합하면, JPA는 **데이터베이스와 상호 작용을 단순화하고 개발자에게 객체 지향 프로그래밍 모델을 유지하면서 데이터를 다룰 수 있는 강력한 도구**입니다. 이로 인해 개발자는 생산성을 향상시키고 유지 보수 비용을 줄일 수 있으며, 데이터베이스와의 상호 작용에 관련된 복잡성을 감소시킬 수 있습니다.

 

**그럼 JPA 안에서 JDBC는 어떻게 작동 되는걸까?**

애플리케이션이 JPA에게 명령을 내려서 JDBC API를 사용 한다.

JPA가 중간에서 객체에 따라 SQL문을 자동으로 작성해주는 역할을 한다.



![img](https://blog.kakaocdn.net/dn/bunflp/btq4vRzExRN/X3JRNEhaes04yi5SYXivf0/img.png)



**JPA는 이렇게 생겨났어요!**

 EJB(자바 표준) -> 하이버네이트(오픈 소스) -> JPA(자바 표준)

 

**JPA는 이렇게 구성되어있어요!**



![img](https://blog.kakaocdn.net/dn/bkUkqa/btq4vSFnYwv/iCilDyFn8qoM2P3NQXgiSK/img.png)



 

